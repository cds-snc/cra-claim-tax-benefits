extends ../base

block variables
  -var title = __('Check your answers before filing')

block content

  h1 #{title}

  each section, index in answerInfo
    div
      .breakdown-table.breakdown-table--answers
        h2.breakdown-table__heading #{__(index)}
        dl.breakdown-table-data
          each row in section
            .breakdown-table__row.breakdown-table__row--answers
              dt.breakdown-table__row-key #{__(row.text)}

              if (row.text.toLowerCase().includes('address'))
                dd.breakdown-table__row-value
                  if hasData(data, 'personal.address.line2')
                    div #{data.personal.address.line2[getLocale()]}-#{data.personal.address.line1[getLocale()]}
                  else
                    div #{data.personal.address.line1}
                  if (getLocale() == "en")
                    div #{data.personal.address.city}, #{data.personal.address.province}
                  else
                    div #{data.personal.address.city} (#{data.personal.address.province})
                  div #{data.personal.address.postalCode}
              else
                //- we don't want to translate the name, dollar amounts, or birthday (formatting the birthday is done prior to hitting the template in checkAnswersFormat)
                if (row.text.toLowerCase().includes('name') || row.data.includes('$') || row.text.toLowerCase().includes('birth'))
                  dd.breakdown-table__row-value #{row.data}
                else
                  dd.breakdown-table__row-value #{__(row.data)}

              dd.breakdown-table__row-link
                if row.urlPath
                  a(href=`${row.urlPath}?ref=checkAnswers`)
                    <span>#{__('Review')}<span class="visually-hidden"> #{__(row.text)}</span>

  +linkButtons('/review', 'Agree')